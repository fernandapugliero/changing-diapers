<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fix My Diaper: Baby-Friendly Places with Changing Tables</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß∑</text></svg>">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 2rem;
      background: white;
      color: #333;
    }
    nav {
      margin-bottom: 2rem;
      padding-top: 1rem;
    }
    nav a {
      margin-right: 20px;
      text-decoration: none;
      font-weight: 600;
      color: inherit;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    h2 {
      font-size: 1.1rem;
      font-weight: 400;
      color: #666;
      margin-top: 0;
      margin-bottom: 2rem;
      text-align: center;
    }
    #map {
      height: 70vh;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    iframe {
      width: 100%;
      height: 600px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: transparent;
    }
    footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.9rem;
      color: #777;
    }
    footer a {
      color: #0070f3;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    p {
      font-size: 1rem;
      color: #555;
      text-align: center;
      margin-top: 1rem;
      line-height: 1.5;
    }
    p strong {
      font-weight: 600;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Map</a>
    <a href="list.html">List</a>
    <a href="submit.html">Submit</a>
  </nav>

  <h1>Need to change a diaper?</h1>
  <h2>Find baby-friendly places in your city with changing tables ‚Äì cafes, restaurants, and more.</h2>

  <!-- Mapa (Aqui ele vai ser centralizado na posi√ß√£o do usu√°rio ou no fallback) -->
  <div id="map"></div>

  <h2 style="text-align: center; font-size: 1.3rem; margin-top: 3rem; margin-bottom: 1rem;">Top 5 best places to change a diaper in Berlin</h2>
  <p style="text-align: center; font-size: 1rem; color: #555; margin-top: 0; line-height: 1.5;">
    Help us make the list even better! <a href="submit.html">Submit a location</a> where you found a great diaper changing station.
  </p>

  <iframe class="airtable-embed"
    src="https://airtable.com/embed/appjWF7WnC8DRWaXM/shr42I0LCf48OO9G1?layout=card&viewControls=on"
    frameborder="0"
    onmousewheel=""
    width="100%"
    height="auto"
    style="background: transparent; border: 1px solid #ccc;"></iframe>

  <footer>
    Made with ‚ô•Ô∏è in Berlin<br />
    Created by <a href="https://fernandapugliero.com" target="_blank">Fernanda Pugliero</a><br /><br />
    <a href="about.html">About</a> | 
    <a href="submit.html">Submit a Location</a>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    // Define uma localiza√ß√£o padr√£o (fallback), no caso, no centro de Berlim
    var defaultLat = 52.5200;  // Latitude de Berlim
    var defaultLon = 13.4050;  // Longitude de Berlim

    // Verifica se o navegador suporta geolocaliza√ß√£o
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var userLat = position.coords.latitude;  // Latitude do usu√°rio
        var userLon = position.coords.longitude; // Longitude do usu√°rio
        
        // Cria o mapa centralizado na localiza√ß√£o do usu√°rio
        var map = L.map('map').setView([userLat, userLon], 13);  

        // Adiciona o tile layer (camada do mapa)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Adiciona um marcador na localiza√ß√£o do usu√°rio
        L.marker([userLat, userLon]).addTo(map)
          .bindPopup('You are here')
          .openPopup();
        
      }, function() {
        // Se o usu√°rio n√£o permitir ou se houver um erro, usamos o fallback
        createMapWithFallback();
      });
    } else {
      // Se o navegador n√£o suporta geolocaliza√ß√£o, usamos o fallback
      createMapWithFallback();
    }

    // Fun√ß√£o para criar o mapa com a localiza√ß√£o padr√£o (fallback)
    function createMapWithFallback() {
      var map = L.map('map').setView([defaultLat, defaultLon], 13);  // Centraliza no ponto padr√£o (Berlim)

      // Adiciona o tile layer (camada do mapa)
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Adiciona um marcador na localiza√ß√£o padr√£o
      L.marker([defaultLat, defaultLon]).addTo(map)
        .bindPopup('Default location (Berlin)')
        .openPopup();
    }
  </script>
</body>
</html>
